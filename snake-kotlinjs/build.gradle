buildscript {
    ext.kotlin_version = '1.3.50'
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

apply plugin: 'kotlin2js'
apply plugin: 'kotlin-dce-js'

repositories {
    mavenCentral()
}

dependencies {
    compile "org.jetbrains.kotlin:kotlin-stdlib-js:$kotlin_version"
}

def outDir = "${projectDir}/web"

clean.doFirst {
    delete outDir
}

compileKotlin2Js {
    kotlinOptions.sourceMap = true
}

runDceKotlinJs {
    dceOptions.outputDirectory = outDir
    dceOptions.devMode = false
}